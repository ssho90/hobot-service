# Phase 2 진행 상황 요약

**최종 업데이트**: 2024-12-19

## 📊 전체 진행률: 약 60%

### 2.1 모듈 1: 정량 시그널 수집 (FRED API) - **약 85% 완료**

#### ✅ 완료된 작업
- [x] **2.1.1** FRED API 연동
  - `fredapi` 패키지 연동 완료
  - 환경변수에서 FRED API 키 로드
  - `test_connection()` 메서드 구현

- [x] **2.1.2** 금리 데이터 수집 및 저장 (부분 완료)
  - DGS10, DGS2 수집 및 저장 완료
  - `collect_yield_curve_data()` 메서드 구현
  - DB 저장 및 중복 방지 로직 구현
  - ⚠️ FEDFUNDS, CPI, PCE, GDP, 유동성 지표는 아직 수집 로직 미구현 (FRED_INDICATORS에는 정의됨)

- [x] **2.1.3** 정량 시그널 계산 (완료)
  - ✅ 공식 1: 장단기 금리차 장기 추세 추종 전략
  - ✅ 공식 2: 실질 금리 (DGS10 - CPI 증가율)
  - ✅ 공식 3: 테일러 준칙 (Target_Rate - FEDFUNDS)
  - ✅ 공식 4: 연준 순유동성 (Fed Net Liquidity)
  - ✅ 공식 5: 하이일드 스프레드 (High Yield Spread)
  - ✅ 추가 지표: 실업률, 고용 지표

#### ⚠️ 미완료 작업
- [ ] **2.1.2** 나머지 지표 수집
  - FEDFUNDS (연준 금리) 수집
  - CPI 데이터 수집 (월별 → 일별 보간)
  - PCE 데이터 수집
  - GDP 데이터 수집
  - 유동성 지표 데이터 수집 (WALCL, WTREGEN, RRPONTSYD, BAMLH0A0HYM2)

- [ ] **2.1.4** 에러 핸들링
  - FRED API 장애 시 처리 로직
  - 데이터 부족 시 처리 로직

- [ ] **2.1.5** 데이터 수집 스케줄 정의
  - FRED API 호출 빈도 (매일 1회, 09:00 KST)
  - 데이터 수집 실패 시 재시도 정책

- [ ] **2.1.6** 데이터 검증 로직 구현
  - 이상치(outlier) 감지
  - 데이터 누락 시 처리 방법
  - 데이터 품질 검증

---

### 2.2 모듈 2: 정성 분석 (LLM) - **0% 완료**

#### ⚠️ 미완료 작업
- [ ] **2.2.1** 데이터 소스 크롤링
  - TradingEconomics 경제 캘린더 크롤링
  - 연준 공식 발표문 (FOMC Statement) 수집
  - `economic_events` 테이블에 저장

- [ ] **2.2.2** LLM 요약 분석
  - Gemini LLM 통합
  - 프롬프트 설계
  - JSON 스키마로 구조화된 출력
  - `economic_events` 테이블에 저장

- [ ] **2.2.3** 토큰 비용 최적화
  - 긴 텍스트 요약 후 LLM에 전달
  - 배치 처리로 API 호출 최소화

---

### 2.3 모듈 3: 내부 데이터 (계좌 손익) - **0% 완료**

#### ⚠️ 미완료 작업
- [ ] **2.3.1** 계좌 상태 조회
  - 기존 `KISAPI.get_balance()` 활용
  - 자산군별 보유 현황 파싱 (Stocks, Bonds, Alternatives, Cash)

- [ ] **2.3.2** 자산군별 손익 계산
  - 각 자산군별 평가 손익률 계산
  - 매입가 대비 현재가 비교
  - JSON 형식으로 구조화

- [ ] **2.3.3** DB 저장
  - 매일 계좌 상태를 `account_snapshots` 테이블에 저장
  - 자산군별 손익을 `pnl_by_asset` JSON 컬럼에 저장
  - 중복 저장 방지

---

## 📝 다음 우선순위 작업

1. **높은 우선순위**
   - 2.1.2: 나머지 FRED 지표 수집 로직 구현 (FEDFUNDS, CPI, PCE, GDP, 유동성 지표)
   - 2.1.5: 데이터 수집 스케줄 정의 및 자동화
   - 2.3.1~2.3.3: 계좌 상태 조회 및 DB 저장 로직 구현

2. **중간 우선순위**
   - 2.1.4: 에러 핸들링 강화
   - 2.1.6: 데이터 검증 로직 구현

3. **낮은 우선순위**
   - 2.2.1~2.2.3: 정성 분석 모듈 구현 (LLM 요약)

---

## 💡 참고사항

- **정량 시그널 계산**은 모두 구현되어 있지만, 일부 지표 데이터가 DB에 없으면 계산이 불가능합니다.
- **데이터 수집 스케줄**이 없어서 현재는 수동으로 데이터를 수집해야 합니다.
- **계좌 손익 모듈**은 KIS API는 있지만, 자산군별 파싱 및 DB 저장 로직이 필요합니다.

